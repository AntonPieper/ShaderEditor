package de.markusfisch.android.shadereditor.app;

import android.app.Application;
import android.os.StrictMode;

import de.markusfisch.android.shadereditor.BuildConfig;
import de.markusfisch.android.shadereditor.database.Database;
import de.markusfisch.android.shadereditor.preference.Preferences;
import de.markusfisch.android.shadereditor.view.UndoRedo;

public class ShaderEditorApp extends Application {
	public static final Preferences preferences = new Preferences();
	public static final UndoRedo.EditHistory editHistory = new UndoRedo.EditHistory();

	@Override
	public void onCreate() {
		super.onCreate();

		if (BuildConfig.DEBUG) {
			StrictMode.setThreadPolicy(
					new StrictMode.ThreadPolicy.Builder()
							.detectAll()
							.penaltyLog()
							.build());

			StrictMode.setVmPolicy(
					new StrictMode.VmPolicy.Builder()
							.detectLeakedSqlLiteObjects()
							.penaltyLog()
							.penaltyDeath()
							.build());
		}

		preferences.init(this);
		// Initialize the singleton instance for the application lifecycle.
		// Other components will get this instance via Database.getInstance().
		Database.getInstance(this);
	}
}